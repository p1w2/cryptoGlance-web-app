!function(t){"use strict";var e=function(e,s){this.HEAT_WARNING=t.devHeatWarning,this.HEAT_DANGER=t.devHeatDanger,this.HW_ENABLED=t.devHWEnabled,this.HW_WARNING=t.devHWWarning,this.HW_DANGER=t.devHWDanger,this.UPDATE_INTERVAL=t.rigUpdateTime,this.TAB_HEADER="<tr><th></th><th>Device name</th><th>Temperature</th><th>Hashrate 5s</th><th>Accepted</th><th>Rejected</th><th>Utility</th><th>HW Errors</th></tr>",this.id=e,this.rigID=s,this.name="Device",this.status={icon:"cpu-processor",colour:"green"},this.health="Alive",this.icon="check",this.enabled="N",this.hashrate_avg="0 KH/s",this.hashrate_5s="0 KH/s",this.temperature_c="n/a",this.temperature_f="n/a",this.accepted="0 (0%)",this.rejected="0 (0%)",this.hw_errors="0 (0%)",this.utility="0m",this.frequency=0,this.panel=""};e.prototype.update=function(t){var e=[];this.id=t.id,this.name=t.name||"Device",this.status=t.status||{icon:"cpu-processor",colour:"green"},this.health=t.health||"Alive",this.icon=t.status.icon||"check",this.enabled=t.enabled+""||"N",this.hashrate_avg=t.hashrate_avg+""||"0 KH/s",this.hashrate_5s=Util.getSpeed(t.hashrate_5s)+""||"0 KH/s",this.temperature=t.temperature||{celsius:0,fahrenheit:0},this.accepted=t.accepted||{raw:"n/a",percent:"%"},this.rejected=t.rejected||{raw:"n/a",percent:"%"},this.hw_errors=t.hw_errors||{raw:"n/a",percent:"%"},this.utility=t.utility+""||"0m",this.frequency=t.frequency+""||0;var s="rig-"+this.rigID+"-"+this.name+"-"+this.id,a=this.name+" "+this.id;for(var i in t)switch(i){case"id":case"enabled":case"status":break;case"temperature":e.push(this._buildStatusHtml(i,t[i].celsius+"&deg;C / "+t[i].fahrenheit+"&deg;F",null,null));break;case"accepted":e.push(this._buildStatusHtml(i,t[i].raw+" <span>("+t[i].percent+")</span>","success",t[i].percent));break;case"rejected":e.push(this._buildStatusHtml(i,t[i].raw+" <span>("+t[i].percent+")</span>","danger",t[i].percent));break;case"hw_errors":e.push(this._buildStatusHtml(i,t[i].raw+" <span>("+t[i].percent+")</span>",null,t[i].percent));break;case"hashrate_5s":case"hashrate_avg":e.push(this._buildStatusHtml(i,Util.getSpeed(t[i]),null,null));break;default:e.push(this._buildStatusHtml(i,t[i]))}return{summary:'<tr><td><i class="icon icon-'+this.status.icon+" "+this.status.colour+'"></i></td><td class="'+this.status.colour+'"><a href="#" data-target=".'+s+"[data-toggle='tab']\">"+a+"</a></td><td>"+this.temperature.celsius+"&deg;C / "+this.temperature.fahrenheit+"&deg;F</td><td>"+this.hashrate_5s+"</td><td>"+this.accepted.raw+" <span>("+this.accepted.percent+")</span></td><td>"+this.rejected.raw+" <span>("+this.rejected.percent+")</span></td><td>"+this.utility+"</td><td>"+this.hw_errors.raw+" <span>("+this.hw_errors.percent+")</span></td></tr>",status:'<div class="tab-pane fade" id="'+s+'"><div class="panel-body panel-body-stats"><div class="panel-body-summary">'+e.join("")+"</div></div></div>",nav:'<li><a class="'+s+" "+this.status.colour+'" href="#'+s+'" data-toggle="tab">'+a+' <i class="icon icon-'+this.status.icon+'"></i></a></li>'}},e.prototype._buildStatusHtml=function(t,e,s,a){return'<div class="stat-pair"><div class="stat-value">'+e+'</div><div class="stat-label">'+t.replace(/_|-|\./g," ")+'</div><div class="progress progress-striped"><div class="progress-bar progress-bar-'+s+'" style="width: '+a+'"></div></div></div>'},t.DeviceCollection.prototype.SubClass=e}(window,window.jQuery);
!function(t){var i=function(t){this.collection=[],this.rigID=t,this.count=0};i.prototype.add=function(t){this.count++,this.collection.push(new this.SubClass(t,this.rigID))},i.prototype.update=function(t){var i,n=[],o=[],s=[];return this.collection.forEach(function(u,c){i=u.update(t[c]||{}),n.push(i.summary),o.push(i.nav),s.push(i.status)}),{nav:o.join(""),summary:n.join(""),status:s.join("")}},t.DeviceCollection=i}(window,window.jQuery);
!function(t,a){var e=function(t){this.poolId=t,this.$poolEl=a("#pool-"+t),this.$poolContentEl=a("#pool-"+t+" .panel-body-stats")};e.prototype.update=function(t){var a="";for(var e in t)if(null!==t[e])switch(e){case"type":break;case"balance":case"paid_BTC":case"paid_NMC":a+=this._buildStatusHtml("green",e,t[e]);break;case"unconfirmed_balance":case"unpaid_BTC":case"unpaid_NMC":a+=this._buildStatusHtml("red",e,t[e]);break;case"last_block":"mpos"===t.type&&"undefined"!=typeof t.url&&(a+=this._buildStatusHtml("green",e,'<a href="'+t.url+"/index.php?page=statistics&action=round&height="+t[e]+'" target="_blank" rel="external">'+t[e]+"</a>"));break;default:a+=this._buildStatusHtml("",e,t[e])}else a+=this._buildStatusHtml("",e,"n/a");a&&this.$poolContentEl.html(a)},e.prototype._buildStatusHtml=function(t,a,e){return'<div class="stat-pair"><div class="stat-value"><span class="'+t+'">'+e+'</span></div><div class="stat-label">'+a.replace(/_|-|\./g," ")+"</div></div>"},t.PoolCollection.prototype.SubClass=e}(window,window.jQuery);
!function(t,o){var a=function(){this.collection=[],this.apiData={type:"pools",action:"update"},this.ready=!0};a.prototype.start=function(){var a=this;o('[data-type="pool"]').each(function(){a._add(this.getAttribute("data-id"))}),this._getData(function(o){a._update(o),setInterval(function(){a.ready&&(a.ready=!1,a._getData(function(t){a._update(t)}))},t.poolUpdateTime)})},a.prototype._add=function(t){this.collection.push(new this.SubClass(t))},a.prototype._update=function(t){this.collection.forEach(function(o,a){o.update(t[a])}),this.ready=!0},a.prototype._getData=function(t){var a=this;o.ajax({url:"ajax.php",data:a.apiData,dataType:"json",statusCode:{401:function(){window.location.assign("login.php")}}}).fail(function(t,o,a){console.error(a)}).done(t)},t.PoolCollection=a}(window,window.jQuery);
!function(t,i){"use strict";var a=function(t){this.rigID=t,this.$rigEl=i("#rig-"+t),this.rigPanel=this.$rigEl.find(".panel-content"),this.$rigNavEl=this.$rigEl.find(".nav"),this.$rigTabContentEl=this.$rigEl.find(".tab-content"),this.$rigTitle=this.$rigEl.find("h1"),this.$rigSummary=i("#rig-"+t+"-summary"),this.$rigSummaryTable=this.$rigSummary.find("table"),this.$rigSummaryTableBody=this.$rigSummaryTable.find("tbody"),this.$loader=this.$rigSummary.find('img[alt="loading"]'),this.$rigSummaryBody=this.$rigSummary.find(".panel-body-summary"),this.deviceCollection=new DeviceCollection(t),this.init=!0,this.ready=!0,this.summaryBtn='<li><a class="blue" href="#rig-'+t+'-summary" data-toggle="tab">Summary <i class="icon icon-dotlist"></i></a></li>',this.panelStatus=""};a.prototype.update=function(t){if("undefined"==typeof t.summary||!t.devs.length)return this._off(),void(this.ready=!1);this.ready||(this.ready=!0,this._on()),this.init&&(this._on(),this.$loader.remove(),this.$rigSummaryTable.show());var a=t.overview||{},e=t.summary||{},s=t.devs||[],r=this.$rigSummary.find(".table-summary").scrollLeft(),l=this.$rigNavEl.find(".active"),n=l.index(),h=l.length?l.find("a")[0].getAttribute("href"):"";if(this.deviceCollection.count<s.length)for(var d=0;d<s.length;d++)this.deviceCollection.add(s[d].id);var o=this.deviceCollection.update(s);this.panelStatus!==a.status.panel&&(this.panelStatus=a.status.panel,this.$rigEl[0].className="panel panel-primary panel-rig "+this.panelStatus),this.$rigNavEl.html(this.summaryBtn+o.nav),this.init&&this.$rigNavEl.find("li:first-child").addClass("active"),this.$rigSummaryBody.html(this._buildStatus(e)),this.$rigSummaryTableBody.html(o.summary),this.$rigTabContentEl.html(this.$rigSummary[0].outerHTML+o.status),l.length&&(this.$rigTabContentEl.find(".active.in").removeClass("in active"),this.$rigNavEl.find("li:eq("+n+")").addClass("active"),i(h).addClass("in active")),this.init=!1,this.$rigSummary.find(".table-summary").scrollLeft(r)},a.prototype._buildStatus=function(t){var i="";for(var a in t)switch(a){case"temperature":i+=this._getStatusHtml(a,t[a].celsius+"&deg;C / "+t[a].fahrenheit+"&deg;F",null,null);break;case"accepted":i+=this._getStatusHtml(a,t[a].raw+" <span>("+t[a].percent+")</span>","success",t[a].percent);break;case"rejected":case"stale":i+=this._getStatusHtml(a,t[a].raw+" <span>("+t[a].percent+")</span>","danger",t[a].percent);break;case"hw_errors":i+=this._getStatusHtml(a,t[a].raw+" <span>("+t[a].percent+")</span>",null,t[a].percent);break;case"hashrate_5s":case"hashrate_avg":i+=this._getStatusHtml(a,Util.getSpeed(t[a]),null,null);break;default:i+=this._getStatusHtml(a,t[a],null,null)}return i},a.prototype._getStatusHtml=function(t,i,a,e){return'<div class="stat-pair"><div class="stat-value">'+i+'</div><div class="stat-label">'+t.replace(/_|-|\./g," ")+'</div><div class="progress progress-striped"><div class="progress-bar progress-bar-'+a+'" style="width: '+e+'"></div></div></div>'},a.prototype._off=function(){this.$rigEl.removeClass("panel-warning panel-danger").addClass("panel-offline"),this.$rigEl.find(".btn-manage-rig").hide(),this.rigPanel.hide()},a.prototype._on=function(){this.$rigEl.removeClass("panel-offline"),this.$rigEl.find(".btn-manage-rig").show(),this.$rigSummary.find("table").show(),this.rigPanel.show()},t.RigCollection.prototype.SubClass=a}(window,window.jQuery);
!function(t,e){"use strict";var a=function(){this.collection=[],this.apiData={type:"rigs",action:"overview"},this.overallHashrate=0,this._ready=!0,this._rigsActive=0,this._rigsResponded=0,this.$overview=e("#overview"),this.$overviewTable=e("#overview table"),this.$overviewTableBody=e("#overview tbody"),this.overviewTableData=""};a.prototype.start=function(){var a=this;e(".panel-rig").each(function(){var t=this.getAttribute("data-id");a._add(t)}),this._getData(function(e){a._buildOverview(e),a.apiData={type:"rigs",action:"update"},setInterval(function(){a._ready&&(a._rigsResponded=0,a._ready=!1,a._update())},t.rigUpdateTime)})},a.prototype._add=function(t){this.collection.push(new this.SubClass(t))},a.prototype._update=function(){var t=this,e=[];this.collection.forEach(function(a,i){t.apiData.id=a.rigID,t._getData(function(r){a.update(r),e[i]=r,t._rigsResponded++,t._rigsResponded===t.collection.length&&(t._ready=!0,t._buildOverview(e))})})},a.prototype._getData=function(t){var a=this;e.ajax({url:"ajax.php",data:a.apiData,dataType:"json"}).done(t).fail(function(t,e,a){console.error(a)})},a.prototype._buildOverview=function(t){function a(t,e){t.overview&&(t=t.overview),i.overviewTableData+=i._buildOverviewRow(t,e+1),i.overallHashrate+=Util.extractHashrate(t.hashrate_5s),r[t.algorithm]+=parseFloat(t.raw_hashrate)}var i=this,r={scrypt:0,sha256:0,x11:0,"scrypt-n":0,x13:0};this.overviewTableData="",this.overallHashrate=0,t.overview&&(t=t.overview),t.forEach(a),this.overallHashrate=Util.getSpeed(this.overallHashrate),this.$overviewTableBody.html(this.overviewTableData);for(var o in r)r[o]?e("#hashrate_"+o).removeClass("hidden").html('<span class="hashrate-algo">'+o+"</span>"+Util.getSpeed(r[o])):e("#total-hashrates #hashrate_"+o).addClass("hidden");this._updateDocumentTitle(this.overallHashrate)},a.prototype._updateDocumentTitle=function(t){document.title=t+" :: Dashboard (cryptoGlance)"},a.prototype._buildOverviewRow=function(t,a){var i=t.status.icon||"ban-circle",r=t.status.colour||"grey",o="grey"!==r?Util.getSpeed(t.hashrate_5s):"--",s=t.active_pool.url||"--",n=t.uptime||"--";return'<tr data-rig="'+a+'"><td><i class="icon icon-'+i+" "+r+'"></i></td><td><a href="#rig-'+a+'" class="anchor-offset rig-'+a+" "+r+'">'+e("#rig-"+a+" h1").html()+"</a></td><td>"+o+"</td><td>"+s+"</td><td>"+n+"</td></tr>"},t.RigCollection=a}(window,window.jQuery);
!function(e){"use strict";var t=function(){throw"Error:: Util is an abstract class, and should not be instantiated!"};t.getSpeed=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" PH/s":e>1e6?parseFloat(e/1e6).toFixed(2)+" TH/s":e>1e3?parseFloat(e/1e3).toFixed(2)+" GH/s":1>e?parseFloat(1e3*e).toFixed(2)+" KH/s":e.toFixed(2)+" MH/s"},t.extractHashrate=function(e){if(!e)return 0;if("number"==typeof e)return e;var t,r,a=/^(\d{1,}|\d{1,}\.\d{1,})?\s?(KH\/s|MH\/s|GH\/s)$/gi;if(a.test(e)){{e.replace(a,function(e,a,s){return t=parseFloat(a),r=s.toLowerCase(),e})}switch(r){case"ph/s":t=1e9*t;break;case"th/s":t=1e6*t;break;case"gh/s":t=1e3*t;break;case"kh/s":t/=1e3;break;case"mh/s":default:t=t}return t}throw"Error:: invalid value of  { "+e+" } for parameter hashrate"},e.Util=t}(window,window.jQuery);
!function(s){var t=function(s){this.id=s,this.currency="CDN",this.balance=0,this.currency_code=0,this.total_addresses=0,this.label="money"};t.prototype.update=function(s){return this.currency=s.currency,this.balance=s.balance,this.currency_code=s.currency_code,this.total_addresses=s.total_addresses,this.label=s.label,this._buildStatusHtml()},t.prototype._buildStatusHtml=function(){return'<div class="stat-pair" id="wallet-address-'+this.id+'"><div class="stat-value"><img src="images/icon-'+this.currency+'.png" alt="'+this.currency+'" /><span class="green">'+this.balance+" "+this.currency_code+'</span><span class="address-label">in <b>'+this.total_addresses+'</b> address(es)</span></div><div class="stat-label"><a href="wallet.php?id='+this.id+'" class="stat-pair-icon">'+this.label+' <i class="icon icon-walletalt"></i></a></div></div>'},s.WalletCollection.prototype.SubClass=t}(window,window.jQuery);
!function(t,a){var e=function(){this.collection=[],this.apiData={type:"wallets",action:"update"},this.walletOverviewHtml="",this.ready=!0,this.$walletOverviewBody=a("#wallet .panel-body")};e.prototype.start=function(){var a=this;this._getData(function(e){e.forEach(function(t,e){a._add(e+1)}),a._update(e),setInterval(function(){a.ready&&(a.ready=!1,a._getData(function(t){a._update(t)}))},t.walletUpdateTime)})},e.prototype._add=function(t){this.collection.push(new this.SubClass(t))},e.prototype._update=function(t){var a=this;this.walletOverviewHtml="",this.collection.forEach(function(e,i){a.walletOverviewHtml+=e.update(t[i])}),this.$walletOverviewBody.html(this.walletOverviewHtml),this.ready=!0},e.prototype._getData=function(t){var e=this;a.ajax({url:"ajax.php",data:e.apiData,dataType:"json",statusCode:{401:function(){window.location.assign("login.php")}}}).fail(function(t,a,e){console.error(t,a,e)}).done(t)},t.WalletCollection=e}(window,window.jQuery);
!function(t){var a=t(document),e=new RigCollection;e.start();var i=new PoolCollection;i.start();var n=new WalletCollection;n.start(),a.on("click",".btn-manage-rig",function(){var a=this.getAttribute("data-attr"),e=t("#manageRig");e.attr("data-attr",a),e.find(".rig-name").html(t("#rig-"+a+" .panel-title .value").text()),e.find(".btn-details").attr("href","rig.php?id="+a),prettifyInputs()}),a.on("click","#manageRig .btn-switchpool",function(){var a=t("#manageRig").attr("data-attr"),e=t("#switchPool .checkbox");e.html('<img src="images/ajax-loader.gif" alt="Loading..." class="ajax-loader" />'),t.ajax({url:"ajax.php",data:{type:"rigs",action:"pools",id:a},dataType:"json"}).done(function(i){"undefined"!=typeof i&&(t("#switchPool").attr("data-minerId",a),t.each(i[0],function(i,n){var o=n.url.replace(/\:[0-9]{1,4}/,"");o=o.slice(o.indexOf("/")+2),e.append('<label for="rig'+a+"-pool"+n.id+'"><input type="radio" name="switchPoolList" id="rig'+a+"-pool"+n.id+'" value="'+n.id+'"><span>'+o+"</span></label>"),1==n.active&&t("input:radio[id=rig"+a+"-pool"+n.id+"]",e).prop("checked",!0)}),prettifyInputs(),e.find(".ajax-loader").remove())})}),a.on("click","#switchPool .btn-success",function(){var a=this.getAttribute("data-attr"),e=t("input[name=switchPoolList]:checked","#switchPool .checkbox").val();"undefined"!=typeof e&&t.ajax({type:"post",data:{type:"miners",action:"switch-pool",miner:a,pool:parseInt(e,10)+1},url:"ajax.php",dataType:"json"}).done(function(){ajaxUpdateCall("rig")})}),a.on("click","#manageRig .btn-restart",function(){var a=this.getAttribute("data-attr");t.ajax({type:"post",data:{type:"miners",action:"restart",miner:a},url:"ajax.php",dataType:"json"})}),a.on("shown.bs.tab",'a[data-toggle="tab"]',function(){var a=t.cookie("use_masonry_layout");"yes"==a&&initMasonry()}),a.on("click",'[id$="-summary"] a[data-target]',function(a){a.preventDefault(),t(a.target.getAttribute("data-target")).trigger("click")})}(window.jQuery);